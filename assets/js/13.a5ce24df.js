(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{505:function(s,t,a){s.exports=a.p+"assets/img/image-20200504103846616.02084f1f.png"},506:function(s,t,a){s.exports=a.p+"assets/img/image-20200504111407287.153c98bf.png"},579:function(s,t,a){"use strict";a.r(t);var e=a(16),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"十、打包发布"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十、打包发布"}},[s._v("#")]),s._v(" 十、打包发布")]),s._v(" "),e("h2",{attrs:{id:"构建打包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建打包"}},[s._v("#")]),s._v(" 构建打包")]),s._v(" "),e("p",[s._v("在发布上线之前，我们需要执行构建打包，将 "),e("code",[s._v(".less")]),s._v("、"),e("code",[s._v(".vue")]),s._v("、"),e("code",[s._v(".js")]),s._v(" 等相关资源进行编译打包，转换成浏览器可以直接识别运行的普通 "),e("code",[s._v("css")]),s._v("、"),e("code",[s._v("js")]),s._v("、"),e("code",[s._v("html")]),s._v("。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yarn run build 或者 yarn build")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("VueCLI 会把打包结果生成存储到项目的 "),e("code",[s._v("dist")]),s._v(" 目录中。")]),s._v(" "),e("p",[s._v("正确的话应该会得到这样一个打包结果：")]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20191122100014192.png",alt:"image-20191122100014192"}})]),s._v(" "),e("h2",{attrs:{id:"关于代码中的-console"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关于代码中的-console"}},[s._v("#")]),s._v(" 关于代码中的 console")]),s._v(" "),e("p",[s._v("console.log 只是用于开发测试使用，发布上线的话没有意义，所以 VueCLI 在打包构建的就是就给你报错不打包了。")]),s._v(" "),e("p",[s._v("正确的做法：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("移除项目中所有的 console\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("为了给大家快速演示打包，我先手动把 console 校验关闭。")]),s._v(" "),e("h2",{attrs:{id:"本地预览测试打包结果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#本地预览测试打包结果"}},[s._v("#")]),s._v(" 本地预览测试打包结果")]),s._v(" "),e("blockquote",[e("p",[s._v("注意：不能直接双击打开 index.html 运行。")])]),s._v(" "),e("p",[s._v("将 dist 放到一个 Web 服务器中运行测试，常见的 Web 服务器：")]),s._v(" "),e("ul",[e("li",[s._v("Ngxin")]),s._v(" "),e("li",[s._v("Apache")]),s._v(" "),e("li",[s._v("tomcat")]),s._v(" "),e("li",[s._v("IIS")]),s._v(" "),e("li",[s._v("。。。。")]),s._v(" "),e("li",[s._v("Node.js")])]),s._v(" "),e("p",[s._v("前端安装配置上面的服务器软件麻烦，这里推荐使用 Vue 官方推荐的一个命令行 http 服务工具："),e("a",{attrs:{href:"https://github.com/zeit/serve",target:"_blank",rel:"noopener noreferrer"}},[s._v("serve"),e("OutboundLink")],1),s._v("。")]),s._v(" "),e("p",[e("code",[s._v("dist")]),s._v(" 目录需要启动一个 HTTP 服务器来访问 (除非你已经将 "),e("code",[s._v("publicPath")]),s._v(" 配置为了一个相对的值)，所以以 "),e("code",[s._v("file://")]),s._v(" 协议直接打开 "),e("code",[s._v("dist/index.html")]),s._v(" 是不会工作的。在本地预览生产环境构建最简单的方式就是使用一个 Node.js 静态文件服务器，例如 "),e("a",{attrs:{href:"https://github.com/zeit/serve",target:"_blank",rel:"noopener noreferrer"}},[s._v("serve"),e("OutboundLink")],1),s._v("：")]),s._v(" "),e("p",[s._v("安装：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yarn global add serve")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意：这是在安装全局包，在任何目录执行都可以")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装一次就可以了，以后不需要重复安装，顶多升级重装")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g serve\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("然后在你的项目目录下执行：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dist 是运行 Web 服务根目录")]),s._v("\nserve -s dist\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("如果启动成功，你将看到如下提示：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("   ┌────────────────────────────────────────────────────┐\n   │                                                    │\n   │   Serving!                                         │\n   │                                                    │\n   │   - Local:            http://localhost:5000        │\n   │   - On Your Network:  http://192.168.156.90:5000   │\n   │                                                    │\n   │   Copied local address to clipboard!               │\n   │                                                    │\n   └────────────────────────────────────────────────────┘\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("blockquote",[e("p",[s._v("serve 默认占用 5000 端口并启动一个服务")])]),s._v(" "),e("p",[s._v("然后在浏览器中访问给出的地址访问测试。")]),s._v(" "),e("p",[s._v("你自己先大概的测试一下，确保打包结果可以正常运行，然后交由专业的测试人员进行测试。")]),s._v(" "),e("p",[s._v("如果测试出问题怎么办？")]),s._v(" "),e("ul",[e("li",[s._v("修改 src 源代码")]),s._v(" "),e("li",[s._v("重新构建打包")])]),s._v(" "),e("blockquote",[e("p",[s._v("注意：")]),s._v(" "),e("p",[s._v("不要去修改 dist 中的文件代码，没有用。")]),s._v(" "),e("p",[s._v("因为每次 "),e("code",[s._v("npm run build")]),s._v(" 都会先把原来的 dist 删除，然后生成新的结果。")])]),s._v(" "),e("h2",{attrs:{id:"部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),e("ul",[e("li",[s._v("公司有专门的 devops，说白了就是运维\n"),e("ul",[e("li",[s._v("有些公司没有专门的运维人员，那就后端负责")])])]),s._v(" "),e("li",[s._v("你只需要把打包结果给人家就可以了")])]),s._v(" "),e("p",[s._v("如果想要自己部署，怎么办？")]),s._v(" "),e("ul",[e("li",[s._v("买一个服务器\n"),e("ul",[e("li",[s._v("安装服务器运行环境")]),s._v(" "),e("li",[s._v("阿里云、腾讯云、....")])])]),s._v(" "),e("li",[s._v("买个域名（非必须）\n"),e("ul",[e("li",[s._v("第一次买非常便宜，几十块钱，续费非常贵")])])]),s._v(" "),e("li",[s._v("把项目代码推送到你的部署服务端")]),s._v(" "),e("li",[s._v("部署")])]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[s._v("购买一个能"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("小时不关机的电脑（有了）\n\t安装配置服务器软件\n  把你的项目打包结构扔到服务器的 Web 服务软件中\n  阿里云（推荐）、腾讯云、百度云、\n购买域名（非必须，也可以直接使用ip地址，只不过不好记）\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"github-pages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#github-pages"}},[s._v("#")]),s._v(" GitHub Pages")]),s._v(" "),e("p",[s._v("GitHub Pages 是 GitHub 提供的一种免费托管静态网站的服务功能。什么是静态网站？它只能处理纯粹的静态文件，例如 html、css、js、图片等资源，它不提供对 Java、PHP、Node.js、Python 等动态服务。")]),s._v(" "),e("p",[s._v("Vue 项目编译之后得到的不就是：纯粹的静态文件吗？")]),s._v(" "),e("p",[s._v("很多知名的技术网站都部署在 GitHub Pages 中：")]),s._v(" "),e("ul",[e("li",[s._v("Vue.js 官方文档")]),s._v(" "),e("li",[s._v("Angular 官方文档")]),s._v(" "),e("li",[s._v("React 官方文档")]),s._v(" "),e("li",[s._v("toutiao-publish.lipengzhou.com")])]),s._v(" "),e("p",[s._v("所以仅适合纯静态资源：技术文档，个人博客...。")]),s._v(" "),e("h3",{attrs:{id:"使用-github-pages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-github-pages"}},[s._v("#")]),s._v(" 使用 GitHub Pages")]),s._v(" "),e("h3",{attrs:{id:"关于默认域名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关于默认域名"}},[s._v("#")]),s._v(" 关于默认域名")]),s._v(" "),e("p",[s._v("GitHub Pages 提供了免费域名：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("用户名.github.io/仓库名/")]),s._v(" "),e("ul",[e("li",[s._v("可以有多个")])])]),s._v(" "),e("li",[e("code",[s._v("用户名.github.io")]),s._v(" "),e("ul",[e("li",[s._v("只能有1个")]),s._v(" "),e("li",[s._v("比较简洁，后面不用跟具体的仓库名称")]),s._v(" "),e("li",[s._v("创建好以后它会直接帮你开启 GitHub Pages 功能")])])])]),s._v(" "),e("p",[s._v("当然了，也可以自定义域名。")]),s._v(" "),e("h3",{attrs:{id:"自定义域名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义域名"}},[s._v("#")]),s._v(" 自定义域名")]),s._v(" "),e("p",[s._v("首先，你要有一个自己的域名。")]),s._v(" "),e("ul",[e("li",[s._v("阿里云万网")]),s._v(" "),e("li",[s._v("新网")]),s._v(" "),e("li",[s._v("godaddy")]),s._v(" "),e("li",[s._v("...")])]),s._v(" "),e("p",[s._v("1、登录你的域名管理后台，添加一个 CNAME 记录")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("lipengzhou.com\n\nbaidu.com\njd.com\ntaobao.com\n\ta.taobao.com\n\tb.taobao.com\n\txxxx\n\t\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("2、在需要自定义域名的仓库中添加一个 "),e("code",[s._v("CNAME")]),s._v(" 文件，里面写你自定义的那个域名。")]),s._v(" "),e("h2",{attrs:{id:"扩展-github-pages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#扩展-github-pages"}},[s._v("#")]),s._v(" 扩展：GitHub Pages")]),s._v(" "),e("p",[s._v("GitHub 也提供了静态文件服务的功能，所谓的静态文件服务仅仅针对纯粹的 html、css、js 等文件托管。")]),s._v(" "),e("p",[s._v("它不能部署后端服务，例如 Java、Node.js、PHP 等都不行。")]),s._v(" "),e("p",[s._v("有了它，我们就能免费薅羊毛。我们能使用它部署自己的博客、学习测试的网站等都可以玩儿了 。")]),s._v(" "),e("h3",{attrs:{id:"把静态文件推到-github-仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#把静态文件推到-github-仓库"}},[s._v("#")]),s._v(" 把静态文件推到 github 仓库")]),s._v(" "),e("h3",{attrs:{id:"开启-github-pages-服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开启-github-pages-服务"}},[s._v("#")]),s._v(" 开启 GitHub Pages 服务")]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20191122102749549.png",alt:"image-20191122102749549"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20191122103010519.png",alt:"image-20191122103010519"}})]),s._v(" "),e("blockquote",[e("p",[s._v("将 source 设置为你的 HTML 文件所在的分支")])]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20191122103055184.png",alt:"image-20191122103055184"}})]),s._v(" "),e("blockquote",[e("p",[s._v("提示成功，往下滚动，找到给出的访问地址")])]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20191122103125360.png",alt:"image-20191122103125360"}})]),s._v(" "),e("blockquote",[e("p",[s._v("访问图示中给出的地址")])]),s._v(" "),e("h3",{attrs:{id:"关于域名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关于域名"}},[s._v("#")]),s._v(" 关于域名")]),s._v(" "),e("h4",{attrs:{id:"默认域名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#默认域名"}},[s._v("#")]),s._v(" 默认域名")]),s._v(" "),e("p",[s._v("GitHub 支持两种域名方式：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("一种是："),e("code",[s._v("你的用户id.github.io")])]),s._v(" "),e("ul",[e("li",[s._v("只能有一个")])])]),s._v(" "),e("li",[e("p",[s._v("一种是："),e("code",[s._v("你的用户id.github.io/xxx")])]),s._v(" "),e("ul",[e("li",[s._v("可以有任意个")])])])]),s._v(" "),e("p",[s._v("对于第一种，你必须创建一个名字叫 "),e("code",[s._v("你的用户id.github.io")]),s._v(" 的仓库，那么该仓库启用 GitHub Pages 之后默认域名就是："),e("code",[s._v("你的用户id.github.io")]),s._v("。")]),s._v(" "),e("p",[s._v("对于第二种，仓库名字就无所谓了，托管到 GitHub Pages 的域名都是 "),e("code",[s._v("你的用户id.github.io/仓库名称")]),s._v("。")]),s._v(" "),e("h4",{attrs:{id:"自定义域名-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义域名-2"}},[s._v("#")]),s._v(" 自定义域名")]),s._v(" "),e("p",[s._v("GitHub 同时也支持自定义域名，前提是你得有一个个域名，推荐从以下渠道购买：")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://wanwang.aliyun.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("阿里云 - 万网"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"https://www.godaddy.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("GoDaddy"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"http://www.xinnet.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("新网"),e("OutboundLink")],1)]),s._v(" "),e("li",[s._v("...")])]),s._v(" "),e("p",[s._v("接下来推荐阅读："),e("a",{attrs:{href:"https://www.jianshu.com/p/2647e079741f",target:"_blank",rel:"noopener noreferrer"}},[s._v("三步搞定 Github Pages 自定义域名"),e("OutboundLink")],1),s._v("。")]),s._v(" "),e("h2",{attrs:{id:"将我们的项目部署到-github-pages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#将我们的项目部署到-github-pages"}},[s._v("#")]),s._v(" 将我们的项目部署到 GitHub Pages")]),s._v(" "),e("p",[s._v("1、准备一个自己的域名")]),s._v(" "),e("ul",[e("li",[s._v("GitHub 默认的免费域名强制开启 https")]),s._v(" "),e("li",[s._v("在 https 协议中无法发出 http 请求")]),s._v(" "),e("li",[s._v("我们项目中使用的接口都是 http 协议的，所以需要准备一个自己的域名，因为自定义域名可以选择使用 http 协议或者 https 协议")]),s._v(" "),e("li",[s._v("或者你让接口开发者为接口服务提供 https 的支持")])]),s._v(" "),e("p",[s._v("2、在域名管理后台添加 "),e("code",[s._v("CNAME")]),s._v(" 记录")]),s._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:a(505),alt:"image-20200504103846616"}}),s._v(" "),e("p",[s._v("3、在项目的 "),e("code",[s._v("public")]),s._v(" 目录中添加 "),e("code",[s._v("CNAME")]),s._v(" 文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("toutiuao.lipengzhou.com\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("4、生成 GitHub 访问令牌")]),s._v(" "),e("img",{attrs:{src:a(506),alt:"image-20200504111407287"}}),s._v(" "),e("blockquote",[e("p",[s._v("点击用户设置")])]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20200504111438466.png",alt:"image-20200504111438466"}})]),s._v(" "),e("blockquote",[e("p",[s._v("选择 Developer settings")])]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20200504111501071.png",alt:"image-20200504111501071"}})]),s._v(" "),e("blockquote",[e("p",[s._v("选择 Personal access tokens -> Generate new token")])]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20200504111544004.png",alt:"image-20200504111544004"}})]),s._v(" "),e("blockquote",[e("p",[s._v("Node:")])]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20200504111553245.png",alt:"image-20200504111553245"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20200504111613344.png",alt:"image-20200504111613344"}})]),s._v(" "),e("blockquote",[e("p",[s._v("token 仅显示1次，之后无法查看，所以建议把 token 保存到你的私密位置。")])]),s._v(" "),e("p",[s._v("5、创建远程仓库（如果已经创建则不需要了）")]),s._v(" "),e("p",[s._v("6、将 GitHub 访问令牌添加到远程仓库的 secrets 中")]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20200504105001784.png",alt:"image-20200504105001784"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20200504105100177.png",alt:"image-20200504105100177"}})]),s._v(" "),e("blockquote",[e("p",[s._v("Name："),e("code",[s._v("ACCESS_TOKEN")])]),s._v(" "),e("p",[s._v("Value: "),e("code",[s._v("之前生成的 GitHub 访问令牌")])])]),s._v(" "),e("p",[e("img",{attrs:{src:"assets/image-20200504105206061.png",alt:"image-20200504105206061"}})]),s._v(" "),e("blockquote",[e("p",[s._v("添加成功了")])]),s._v(" "),e("p",[s._v("7、在项目根目录中添加 "),e("code",[s._v(".github/workflows/main.yml")])]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" build and deploy\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当 master 分支 push 代码的时候触发 workflow")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("push")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("branches")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" master\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jobs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build-deploy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runs-on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ubuntu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("latest\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("steps")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载仓库代码")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/checkout@v2\n    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 缓存依赖")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Get yarn cache\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" yarn"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cache\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(' echo "'),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("set"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("output name=dir"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v('$(yarn cache dir)"\n    '),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/cache@v1\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" steps.yarn"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cache.outputs.dir "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" runner.os "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("yarn"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("$"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" hashFiles('"),e("span",{pre:!0,attrs:{class:"token important"}},[s._v("**/yarn.lock')")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restore-keys")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n          ${{ runner.os }}-yarn-")]),s._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" yarn\n    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打包构建")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" yarn build\n    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布到 GitHub Pages")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deploy\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" peaceiris/actions"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("gh"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pages@v2\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("PERSONAL_TOKEN")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.ACCESS_TOKEN "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 访问秘钥")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("PUBLISH_BRANCH")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" gh"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pages "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推送分支")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("PUBLISH_DIR")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ./dist "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 部署目录")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br")])]),e("blockquote",[e("p",[s._v("有兴趣的话可以了解一下：GitHub Action，不建议大家现在去折腾这个东西。")])]),s._v(" "),e("p",[s._v("8、把项目代码推送到远程仓库")]),s._v(" "),e("p",[s._v("9、查看构建部署状态（它需要执行一个构建部署的流程，没那么快）")]),s._v(" "),e("p",[s._v("最后就是如何更新项目网站？")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("很简单，修改源代码，把更新提交到远程仓库即可。\n说白了你可以忽略网站部署这件事儿了。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("然后你可以通过仓库中的 Action 查看构建部署状态（非必须）。")]),s._v(" "),e("p",[s._v("不想看的话就等一会儿就可以了。")]),s._v(" "),e("p",[s._v("如果打算将项目部署到 "),e("code",[s._v("https://.github.io/")]),s._v(" 上, "),e("code",[s._v("publicPath")]),s._v(" 将默认被设为 "),e("code",[s._v('"/"')]),s._v("，你可以忽略这个参数。")]),s._v(" "),e("p",[s._v("如果打算将项目部署到 "),e("code",[s._v("https://.github.io//")]),s._v(" 上 (即仓库地址为 "),e("code",[s._v("https://github.com//")]),s._v(")，可将 "),e("code",[s._v("publicPath")]),s._v(" 设为 "),e("code",[s._v('"//"')]),s._v("。举个例子，如果仓库名字为“my-project”，那么 "),e("code",[s._v("vue.config.js")]),s._v(" 的内容应如下所示：")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[s._v("module"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  publicPath"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/my-project/"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("修改完配置文件只有，要重新构建，然后将新的打包结果推到仓库才能生效。")]),s._v(" "),e("p",[s._v("推送的时候，为了方便，建议直接加上 "),e("code",[s._v("--force")]),s._v(" 参数，强制推送。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --force 强制推送，简写 -f")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -u origin master -f\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"搭建自己的个人网站"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搭建自己的个人网站"}},[s._v("#")]),s._v(" 搭建自己的个人网站")]),s._v(" "),e("ul",[e("li",[s._v("WordPress\n"),e("ul",[e("li",[s._v("基于 PHP 开发的一个开源的网站工具")]),s._v(" "),e("li",[s._v("它不能部署到 GitHub Pages，因为它需要 PHP 允许环境")]),s._v(" "),e("li",[s._v("如果你想玩儿这个东西，我建议买个服务器，然后搭建 WordPress")])])]),s._v(" "),e("li",[s._v("Ghost\n"),e("ul",[e("li",[s._v("基于 Node.js 构建的一个开源的网站程序")])])])]),s._v(" "),e("p",[s._v("类似于 WordPress、Ghost 比较适合普通用户，它们都有管理后台，管理发布的内容。")]),s._v(" "),e("p",[s._v("还有一种网站工具：静态网站生成器，这类的工具可以把 Markdown 文件转换为 HTML 文件，而且还有漂亮的外壳。")]),s._v(" "),e("ul",[e("li",[s._v("Hexo")]),s._v(" "),e("li",[s._v("Vuepress\n"),e("ul",[e("li",[s._v("Vue 官方开发的一个制作静态网站的工具")]),s._v(" "),e("li",[s._v("Vue 的官方文档都是基于它做的")]),s._v(" "),e("li",[s._v("也可以做博客，因为它有博客插件")])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);